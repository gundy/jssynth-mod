System.register("lib/src/mod/MOD_FINETUNE_TABLE.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b=[0,1,2,3,4,5,6,7,-8,-7,-6,-5,-4,-3,-2,-1],a("MOD_FINETUNE_TABLE",b)}}}),System.register("lib/src/mod/effects/MOD_SET_SPEED.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){64>=c?d.speed=c:d.bpm=c}}),a("MOD_SET_SPEED",d)}}}),System.register("lib/src/mod/effects/INVERT_LOOP_TABLE.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b=[0,5,6,7,8,10,11,13,16,19,22,26,32,43,64,128],a("INVERT_LOOP_TABLE",b)}}}),System.register("lib/src/mod/effects/MOD_PT_INVERT_LOOP.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/INVERT_LOOP_TABLE.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.INVERT_LOOP_TABLE}],execute:function(){"use strict";e=b.merge(c,{div:function(a,b,c,d,e,f,g,h){e.effectState.invertLoop.delay=0;var i=e.sample;i>0&&(e.effectState.invertLoop.sample=h.instruments[i])},tick:function(a,b,c,e,f){var g=f.effectState.invertLoop.sample;f.effectState.invertLoop.delay+=d[c],g&&g.metadata.repeatLength>2&&f.effectState.invertLoop.delay>=128&&(f.effectState.invertLoop.delay=0,f.effectState.invertLoop.pos++,f.effectState.invertLoop.pos>g.metadata.repeatLength&&(f.effectState.invertLoop.pos=0),g.data[g.metadata.repeatStart+f.effectState.invertLoop.pos]=0-g.data[g.metadata.repeatStart+f.effectState.invertLoop.pos])}}),a("MOD_PT_INVERT_LOOP",e)}}}),System.register("lib/src/mod/effects/MOD_PT_DELAY_PATTERN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d){d.patternDelay=c*d.speed},tick:function(a,b,c,d,e){}}),a("MOD_PT_DELAY_PATTERN",d)}}}),System.register("lib/src/mod/effects/MOD_PT_DELAY_NOTE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/MOD_PERIOD_TABLE.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.MOD_PERIOD_TABLE}],execute:function(){"use strict";e=b.merge(c,{div:function(a,b,c,e,f,g,h,i){var j=h.note;0>j&&(j=d.getNote(g));var k=h.sampleNumber>0?i.instruments[h.sampleNumber-1]:null,l=null;if(k&&j>0){var m=k.metadata.noteToSampleMap[j];l=k.samples[m]}f.effectState.noteDelay={delay:c,note:h,sample:l}},tick:function(a,b,c,e,f){if(e.tick==c-1){var g=f.effectState.noteDelay.note,h=g.note<0?0:d.getPeriod(g.note),i=g.volume,j=f.effectState.noteDelay.sample;j&&(a.setSample(b,j),f.volume=j.metadata.volume,f.lastVolume=j.metadata.volume),h>0&&(f.period=h,f.lastPeriod=h,a.setSamplePosition(b,0)),i>=0&&(f.volume=i,f.lastVolume=i)}},allowPeriodChange:!1,allowSampleTrigger:!1,allowVolumeChange:!1}),a("MOD_PT_DELAY_NOTE",e)}}}),System.register("lib/src/mod/effects/MOD_PT_CUT_NOTE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{tick:function(a,b,c,d,e){d.tick>=c&&(e.volume=0),e.lastVolume=e.volume}}),a("MOD_PT_CUT_NOTE",d)}}}),System.register("lib/src/mod/effects/MOD_PT_FINE_VOLSLIDE_DOWN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.volume-=c,e.volume<0&&(e.volume=0),e.lastVolume=e.volume}}),a("MOD_PT_FINE_VOLSLIDE_DOWN",d)}}}),System.register("lib/src/mod/effects/MOD_PT_FINE_VOLSLIDE_UP.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.volume+=c,e.volume>64&&(e.volume=64),e.lastVolume=e.volume}}),a("MOD_PT_FINE_VOLSLIDE_UP",d)}}}),System.register("lib/src/mod/effects/MOD_PT_RETRIG_NOTE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{tick:function(a,b,c,d,e){(d.tick+1)%c==0&&a.setSamplePosition(b,0)}}),a("MOD_PT_RETRIG_NOTE",d)}}}),System.register("lib/src/mod/effects/MOD_PT_16_POS_PAN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.panPos.left=(15-c)/15,e.panPos.right=c/15}}),a("MOD_PT_16_POS_PAN",d)}}}),System.register("lib/src/mod/effects/MOD_PT_SET_TREMOLO_WAVEFORM.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.effectState.tremoloParams.waveform=7&c}}),a("MOD_PT_SET_TREMOLO_WAVEFORM",d)}}}),System.register("lib/src/mod/effects/MOD_PT_PATTERN_LOOP.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f,g,h){var i=function(){e.effectState.patternLoop.count--,d.l_breakToRow=e.effectState.patternLoop.row,d.l_jumpToPattern=d.pos};0==c?e.effectState.patternLoop.row=d.row:null==e.effectState.patternLoop.count?(e.effectState.patternLoop.count=c,i()):0!=e.effectState.patternLoop.count?i():e.effectState.patternLoop.count=null}}),a("MOD_PT_PATTERN_LOOP",d)}}}),System.register("lib/src/mod/effects/MOD_PT_SET_FINETUNE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=Math.pow(2,1/96),e=b.merge(c,{div:function(a,b,c,e,f,g,h,i){if(0!=h.sampleNumber){var j=i.instruments[h.sampleNumber-1];j.metadata.pitchOfs=Math.pow(d,8>c?c:c-16)}}}),a("MOD_PT_SET_FINETUNE",e)}}}),System.register("lib/src/mod/effects/MOD_PT_SET_VIBRATO_WAVEFORM.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.effectState.vibratoParams.waveform=7&c}}),a("MOD_PT_SET_VIBRATO_WAVEFORM",d)}}}),System.register("lib/src/mod/effects/MOD_PT_GLISSANDO_CONTROL.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{tick:function(a,b,c,d,e){d.glissandoControl=c}}),a("MOD_PT_GLISSANDO_CONTROL",d)}}}),System.register("lib/src/mod/effects/MOD_PT_FINE_PORTA_DOWN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{tick:function(a,b,c,d,e){e.period+=4*c,e.lastPeriod=e.period}}),a("MOD_PT_FINE_PORTA_DOWN",d)}}}),System.register("lib/src/mod/effects/MOD_PT_FINE_PORTA_UP.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{tick:function(a,b,c,d,e){e.period-=4*c,e.lastPeriod=e.period}}),a("MOD_PT_FINE_PORTA_UP",d)}}}),System.register("lib/src/mod/effects/MOD_PT_SET_FILTER.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f){d.filter=c}}),a("MOD_PT_SET_FILTER",d)}}}),System.register("lib/src/mod/effects/MOD_PROTRACKER.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/MOD_PT_SET_FILTER.js","lib/src/mod/effects/MOD_PT_FINE_PORTA_UP.js","lib/src/mod/effects/MOD_PT_FINE_PORTA_DOWN.js","lib/src/mod/effects/MOD_PT_GLISSANDO_CONTROL.js","lib/src/mod/effects/MOD_PT_SET_VIBRATO_WAVEFORM.js","lib/src/mod/effects/MOD_PT_SET_FINETUNE.js","lib/src/mod/effects/MOD_PT_PATTERN_LOOP.js","lib/src/mod/effects/MOD_PT_SET_TREMOLO_WAVEFORM.js","lib/src/mod/effects/MOD_PT_16_POS_PAN.js","lib/src/mod/effects/MOD_PT_RETRIG_NOTE.js","lib/src/mod/effects/MOD_PT_FINE_VOLSLIDE_UP.js","lib/src/mod/effects/MOD_PT_FINE_VOLSLIDE_DOWN.js","lib/src/mod/effects/MOD_PT_CUT_NOTE.js","lib/src/mod/effects/MOD_PT_DELAY_NOTE.js","lib/src/mod/effects/MOD_PT_DELAY_PATTERN.js","lib/src/mod/effects/MOD_PT_INVERT_LOOP.js"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.MOD_PT_SET_FILTER},function(a){e=a.MOD_PT_FINE_PORTA_UP},function(a){f=a.MOD_PT_FINE_PORTA_DOWN},function(a){g=a.MOD_PT_GLISSANDO_CONTROL},function(a){h=a.MOD_PT_SET_VIBRATO_WAVEFORM},function(a){i=a.MOD_PT_SET_FINETUNE},function(a){j=a.MOD_PT_PATTERN_LOOP},function(a){k=a.MOD_PT_SET_TREMOLO_WAVEFORM},function(a){l=a.MOD_PT_16_POS_PAN},function(a){m=a.MOD_PT_RETRIG_NOTE},function(a){n=a.MOD_PT_FINE_VOLSLIDE_UP},function(a){o=a.MOD_PT_FINE_VOLSLIDE_DOWN},function(a){p=a.MOD_PT_CUT_NOTE},function(a){q=a.MOD_PT_DELAY_NOTE},function(a){r=a.MOD_PT_DELAY_PATTERN},function(a){s=a.MOD_PT_INVERT_LOOP}],execute:function(){"use strict";t={224:d,225:e,226:f,227:g,228:h,229:i,230:j,231:k,232:l,233:m,234:n,235:o,236:p,237:q,238:r,239:s},u=b.merge(c,{div:function(a,b,c,d,e,f,g,h){var i=224+(240&c)/16,j=15&c;t[i].div(a,b,j,d,e,f,g,h)},tick:function(a,b,c,d,e){var f=224+(240&c)/16,g=15&c;t[f].tick(a,b,g,d,e)}}),a("MOD_PROTRACKER",u)}}}),System.register("lib/src/mod/effects/MOD_PATTERN_BREAK.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){var f=(240&c)/16,g=15&c,h=10*f+g;d.breakToRow=h}}),a("MOD_PATTERN_BREAK",d)}}}),System.register("lib/src/mod/effects/MOD_SET_VOLUME.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){e.volume=0>c?0:c>64?64:c,e.lastVolume=e.volume}}),a("MOD_SET_VOLUME",d)}}}),System.register("lib/src/mod/effects/MOD_JUMP_TO_PATTERN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e){d.jumpToPattern=c}}),a("MOD_JUMP_TO_PATTERN",d)}}}),System.register("lib/src/mod/effects/MOD_SAMPLE_OFFSET.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f){a.setSamplePosition(b,256*c)}}),a("MOD_SAMPLE_OFFSET",d)}}}),System.register("lib/src/mod/effects/MOD_PAN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f){128>=c?(e.panPos.left=(128-c)/128,e.panPos.right=c/128):164==c&&(e.panPos.left=1,e.panPos.right=-1)}}),a("MOD_PAN",d)}}}),System.register("lib/src/mod/effects/MOD_TREMOLO.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/VIBRATO_TABLE.js"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.VIBRATO_TABLE}],execute:function(){"use strict";e=function(a){a.pos=(a.pos+a.speed)%64},f=function(a){return d[3&a.waveform][a.pos]*a.depth/64},g=b.merge(c,{div:function(a,b,c,d,e,f){var g=e.effectState.tremoloParams||{waveform:0,pos:0,depth:0,speed:0};if(g.waveform<=3&&f>0&&(g.pos=0),c>0){var h=15&c;h>0&&(g.depth=h);var i=(240&c)/16;i>0&&(g.speed=i)}e.effectState.tremoloParams=g},tick:function(a,b,c,d,g){var h=g.effectState.tremoloParams;h&&(e(h),g.volume=g.lastVolume+f(h),g.volume=Math.round(g.volume<0?0:g.volume>64?64:g.volume))}}),a("MOD_TREMOLO",g)}}}),System.register("lib/src/mod/effects/MOD_VIBRATO_PLUS_VOL_SLIDE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/MOD_VIBRATO.js","lib/src/mod/effects/MOD_VOLUME_SLIDE.js"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.MOD_VIBRATO},function(a){e=a.MOD_VOLUME_SLIDE}],execute:function(){"use strict";f=b.merge(c,{div:function(){},tick:function(a,b,c,f,g){e.tick(a,b,c,f,g),d.tick(a,b,c,f,g)}}),a("MOD_VIBRATO_PLUS_VOL_SLIDE",f)}}}),System.register("lib/src/mod/effects/MOD_VOLUME_SLIDE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f){},tick:function(a,b,c,d,e){var f=(240&c)/16,g=15&c;0!==f&&0!==g&&(g=0),e.volume+=f-g,e.volume=e.volume<0?0:e.volume>64?64:e.volume,e.lastVolume=e.volume}}),a("MOD_VOLUME_SLIDE",d)}}}),System.register("lib/src/mod/effects/MOD_PORTA_PLUS_VOL_SLIDE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/MOD_PORTA_TO_NOTE.js","lib/src/mod/effects/MOD_VOLUME_SLIDE.js"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.MOD_PORTA_TO_NOTE},function(a){e=a.MOD_VOLUME_SLIDE}],execute:function(){"use strict";f=b.merge(c,{div:function(a,b,c,d,e,f){0!=f&&(e.effectState.portToNoteDestPeriod=f,e.effectState.portToNoteSpeed||(e.effectState.portToNoteSpeed=0))},tick:function(a,b,c,f,g){d.tick(a,b,c,f,g),e.tick(a,b,c,f,g)},allowPeriodChange:!1}),a("MOD_PORTA_PLUS_VOL_SLIDE",f)}}}),System.register("lib/src/mod/effects/VIBRATO_TABLE.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b=[[0,24,49,74,97,120,141,161,180,197,212,224,235,244,250,253,255,253,250,244,235,224,212,197,180,161,141,120,97,74,49,24,0,-24,-49,-74,-97,-120,-141,-161,-180,-197,-212,-224,-235,-244,-250,-253,-255,-253,-250,-244,-235,-224,-212,-197,-180,-161,-141,-120,-97,-74,-49,-24],[255,246,238,230,222,214,206,198,190,182,173,165,157,149,141,133,125,117,109,100,92,84,76,68,60,52,44,36,27,19,11,3,-4,-12,-20,-28,-36,-45,-53,-61,-69,-77,-85,-93,-101,-109,-118,-126,-134,-142,-150,-158,-166,-174,-182,-191,-199,-207,-215,-223,-231,-239,-247,-255],[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255,-255],[81,-123,63,-138,153,-84,208,97,160,-195,173,-94,162,30,34,-135,-102,-82,24,-141,-167,-137,-232,-229,224,145,-212,181,60,64,-55,36,-26,46,120,163,-132,-16,-208,-87,179,122,244,91,179,-175,202,-207,168,191,-241,236,-192,-146,-185,12,6,81,214,151,196,-10,-95,-155]],a("VIBRATO_TABLE",b)}}}),System.register("lib/src/mod/effects/MOD_VIBRATO.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/VIBRATO_TABLE.js"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.VIBRATO_TABLE}],execute:function(){"use strict";e=function(a){return d[3&a.waveform][a.pos]*a.depth/256},f=function(a){a.pos=(a.pos+a.speed)%64},g=b.merge(c,{div:function(a,b,c,d,e,f){var g=e.effectState.vibratoParams||{waveform:0,pos:0,depth:0,speed:0};if(g.waveform<=3&&f>0&&(g.pos=0),c>0){var h=15&c;h>0&&(g.depth=h);var i=(240&c)/16;i>0&&(g.speed=i)}e.effectState.vibratoParams=g},tick:function(a,b,c,d,g){var h=g.effectState.vibratoParams;h&&(f(h),g.period=g.lastPeriod+4*e(h))}}),a("MOD_VIBRATO",g)}}}),System.register("lib/src/mod/effects/MOD_PORTA_TO_NOTE.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js"],function(a){var b,c,d;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT}],execute:function(){"use strict";d=b.merge(c,{div:function(a,b,c,d,e,f){0!=f&&(e.effectState.portToNoteDestPeriod=f,e.effectState.portToNoteSpeed||(e.effectState.portToNoteSpeed=0),e.lastPeriod=f),0!=c&&(e.effectState.portToNoteSpeed=4*c)},tick:function(a,b,c,d,e){e.effectState.portToNoteDestPeriod&&e.effectState.portToNoteSpeed&&(e.effectState.portToNoteDestPeriod>e.period&&(e.period+=e.effectState.portToNoteSpeed,e.period>e.effectState.portToNoteDestPeriod&&(e.period=e.effectState.portToNoteDestPeriod,e.lastPeriod=e.period)),e.effectState.portToNoteDestPeriod<e.period&&(e.period-=e.effectState.portToNoteSpeed,e.period<e.effectState.portToNoteDestPeriod&&(e.period=e.effectState.portToNoteDestPeriod,e.lastPeriod=e.period)))},allowPeriodChange:!1,allowSampleTrigger:!1}),a("MOD_PORTA_TO_NOTE",d)}}}),System.register("lib/src/mod/effects/MOD_PORTA_DOWN.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/SLIDE_CONFIG.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.SLIDE_CONFIG}],execute:function(){"use strict";e=b.merge(c,{div:function(a,b,c,d,e){e.effectState.portAmt=4*c},tick:function(a,b,c,e,f){f.period+=f.effectState.portAmt,f.period>d.MAX_SLIDE_PERIOD&&(f.period=d.MAX_SLIDE_PERIOD)}}),a("MOD_PORTA_DOWN",e)}}}),System.register("lib/src/mod/effects/SLIDE_CONFIG.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b={MIN_SLIDE_PERIOD:54,MAX_SLIDE_PERIOD:6848},a("SLIDE_CONFIG",b)}}}),System.register("lib/src/mod/effects/MOD_PORTA_UP.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/SLIDE_CONFIG.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.SLIDE_CONFIG}],execute:function(){"use strict";e=b.merge(c,{div:function(a,b,c,d,e){e.effectState.portAmt=4*c},tick:function(a,b,c,e,f){f.period-=f.effectState.portAmt,f.period<d.MIN_SLIDE_PERIOD&&(f.period=d.MIN_SLIDE_PERIOD)}}),a("MOD_PORTA_UP",e)}}}),System.register("github:gundy/jssynth@master/lib/src/webaudiodriver",["npm:babel-runtime@5.2.17/helpers/class-call-check"],function(a){var b,c,d,e;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";"format es6";c=2048,d=2,e=function f(a,e){b(this,f);var g=this;if(window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=window.webkitAudioContext),!window.hasOwnProperty("AudioContext"))throw new Error("Unable to use WebAudioDriver in this browser.");this.context=new AudioContext,this.node=this.context.createScriptProcessor(e||c,0,d),this.nextSamples=null,this.nextSamplesOffset=0;var h=function(b){for(var c=b.outputBuffer,e=c.sampleRate,f=c.length,h=[c.getChannelData(0),c.getChannelData(1)],i=null,j=0;f>j;){g.nextSamples||(g.nextSamples=a.mix(e),g.nextSamplesOffset=0);for(var k=0;d>k;k++)for(i=0;g.nextSamplesOffset+i<g.nextSamples.bufferSize&&f>i+j;i++)h[k][j+i]=g.nextSamples.output[k][g.nextSamplesOffset+i];j+=i,g.nextSamplesOffset+=i,g.nextSamplesOffset>=g.nextSamples.bufferSize&&(g.nextSamples=null)}};this.start=function(){this.node.connect(g.context.destination),this.node.onaudioprocess=h},this.stop=function(){this.node.disconnect(),this.node.onaudioprocess=void 0}},a("WebAudioDriver",e)}}}),System.register("github:gundy/jssynth@master/lib/src/instrument",["npm:babel-runtime@5.2.17/helpers/class-call-check","github:gundy/jssynth@master/lib/src/utils"],function(a){var b,c,d,e;return{setters:[function(a){b=a["default"]},function(a){c=a.Utils}],execute:function(){"use strict";d={numSamples:1,name:"Default Instrument",noteToSampleMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],volumeType:0,volumeEnvelope:[],numVolumePoints:0,volumeSustainPoint:0,volumeLoopStartPoint:0,volumeLoopEndPoint:0,panningType:0,panningEnvelope:[],numPanningPoints:0,panningSustainPoint:0,panningLoopStartPoint:0,panningLoopEndPoint:0,vibratoType:0,vibratoSweep:0,vibratoDepth:0,vibratoRate:0,volumeFadeout:0},e=function f(a,e){b(this,f),this.metadata=c.merge(d,a),this.samples=e},a("Instrument",e)}}}),System.register("github:gundy/jssynth@master/lib/src/sample",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check","github:gundy/jssynth@master/lib/src/utils"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.Utils}],execute:function(){"use strict";e={name:"",bits:8,channels:1,littleEndian:!0,deltaEncoding:!1,signed:!0,sampleRate:8e3,representedFreq:440,pitchOfs:1,repeatType:"NON_REPEATING",volume:64,repeatStart:0,repeatEnd:0,sampleLength:0},f=function(){function a(b,f,g){if(c(this,a),this.metadata=d.merge(e,f),"function"==typeof b?this.data=b():this.data=a.convertSamplesBytesToDoubles(b,f,g),"NON_REPEATING"!==this.metadata.repeatType)for(var h=0;h<this.data.length;h++)this.data[h][f.repeatEnd+1]=this.data[h][f.repeatEnd]}return b(a,null,[{key:"convertSamplesBytesToDoubles",value:function(a,b,c){var d,e=c||0,f=[],g=[];for(d=0;d<b.channels;d++)f[d]=[],g[d]=[];if(b.bits%8!==0||b.bits>24)throw new Error("can only read 8, 16 or 24-bit samples");for(var h=b.bits/8,i=h*b.channels,j=b.sampleLength,k=0;j>k;k++){var l=i*k;for(d=0;d<b.channels;d++){for(var m=l+d*h,n=m+(b.littleEndian?h-1:0),o=m+(b.littleEndian?-1:h),p=b.littleEndian?-1:1,q=0,r=.5,s=255,t=n;t!==o;t+=p)q=256*q+a.charCodeAt(e+t),r=256*r,s=256*s+255;if(b.signed&&(q=(q^r)&s),b.deltaEncoding){var u=0==k?0:g[d][k-1];g[d][k]=u+((q^r)&s)&255,f[d][k]=(((g[d][k]^r)&s)-r)/r}else q=(q-r)/r,f[d][k]=q}}return f}}]),a}(),a("Sample",f)}}}),System.register("github:gundy/jssynth@master/lib/src/utils",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check"],function(a){var b,c,d;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){"use strict";"format es6";d=function(){function a(){c(this,a)}return b(a,null,[{key:"clone",value:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}},{key:"merge",value:function(b,c){var d=a.clone(b);if(void 0!==c&&null!==c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d}},{key:"makeArrayOf",value:function(a,b){for(var c=[],d=b;d--;)c[d]=a;return c}}]),a}(),a("Utils",d)}}}),System.register("github:gundy/jssynth@master/lib/src/mixer",["npm:babel-runtime@5.2.17/helpers/class-call-check","npm:babel-runtime@5.2.17/helpers/create-class","github:gundy/jssynth@master/lib/src/utils"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.Utils}],execute:function(){"use strict";"format es6";e={numChannels:8,volume:64,secondsPerMix:.1,filters:null},f={panPos:0,playbackFreqHz:0,sample:void 0,samplePosition:-1,volume:64,enabled:!0},g={REP_NORMAL:function(a,b,c,d){var e=a;for(e+=b;e>=c;)e-=d;return e},NON_REPEATING:function(a,b){return a+b}},h=function j(a,c){b(this,j),this.bufferSize=a,this.output=c},i=function(){function a(c,g){b(this,a),this.globalState=d.merge(e,c),this.preMixCallback=null,this.preMixObject=null,this.postMixCallback=null,this.postMixObject=null,this.channelState=[];for(var h=d.merge(f,g),i=0;i<this.globalState.numChannels;i++)this.channelState[i]=d.clone(h)}return c(a,[{key:"setPreMixCallback",value:function(a,b){this.preMixCallback=a,this.preMixObject=b}},{key:"setPostMixCallback",value:function(a,b){this.postMixCallback=a,this.postMixObject=b}},{key:"setGlobalVolume",value:function(a){this.globalState.volume=a}},{key:"setSecondsPerMix",value:function(a){this.globalState.secondsPerMix=a}},{key:"triggerSample",value:function(a,b,c){this.channelState[a].sample=b,this.channelState[a].playbackFreqHz=c,this.channelState[a].samplePosition=0,this.channelState[a].volume=b.metadata.volume}},{key:"enableChannels",value:function(a){for(var b=0;b<a.length;b++)this.channelState[a[b]].enabled=!0}},{key:"disableChannels",value:function(a){for(var b=0;b<a.length;b++)this.channelState[a[b]].enabled=!1}},{key:"setSample",value:function(a,b){this.channelState[a].sample=b}},{key:"setSamplePosition",value:function(a,b){var c=this.channelState[a].sample;if(c){var d=c.metadata.sampleLength;if("NON_REPEATING"!==c.metadata.repeatType)for(var e=c.metadata.repeatStart,f=c.metadata.repeatEnd,g=f-e;b>d;)b-=g;d>b?this.channelState[a].samplePosition=b:this.channelState[a].samplePosition=-1}}},{key:"addToSamplePosition",value:function(a,b){var c=this.channelState[a].sample;c&&this.channelState[a].samplePosition>=0&&this.setSamplePosition(a,this.channelState[a].samplePosition+b)}},{key:"setFrequency",value:function(a,b){this.channelState[a].playbackFreqHz=b}},{key:"setVolume",value:function(a,b){this.channelState[a].volume=b}},{key:"setPanPosition",value:function(a,b){this.channelState[a].panPos=b}},{key:"cut",value:function(a){this.channelState[a].samplePosition=-1,this.channelState[a].sample=void 0}},{key:"setFilters",value:function(a){a?this.globalState.filters=a:this.globalState.filters=null}},{key:"calculatePanMatrix",value:function(a){if(a>=-1&&1>=a){var a=(a+1)/2;return{ll:1-a,lr:0,rl:0,rr:a}}return{ll:1,rr:-1}}},{key:"mix",value:function(a){var b=this;this.preMixCallback&&this.preMixCallback.call(this.preMixObject,this,a);var c=0,e=0,f=[],i=Math.floor(a*this.globalState.secondsPerMix);f[0]=d.makeArrayOf(0,i),f[1]=d.makeArrayOf(0,i);var j=this.globalState.numChannels,k=this.globalState.volume;for(e=0;j>e;e++){var l=this.channelState[e];if(!l.enabled)break;var m=this.calculatePanMatrix(l.panPos),n=l.sample,o=l.volume,p=l.samplePosition,q=l.playbackFreqHz/a,r=1/(j/2)*(k/64)*(o/64),s=r*m.ll,t=r*m.rr;if(n&&n.data&&p>=0&&q>0){var u=n.metadata.representedFreq,v=n.metadata.sampleRate;q*=v/u;var w=n.data[0],x=n.data[1]||n.data[0],y=n.metadata.sampleLength,z=n.metadata.repeatStart,A=n.metadata.repeatEnd,B=A-z,C=g[n.metadata.repeatType];for(c=0;i>c&&y>p;c++)f[0][c]+=w[Math.floor(p)]*s,f[1][c]+=x[Math.floor(p)]*t,p=C(p,q,A,B)}l.samplePosition=p}if(this.globalState.filters){var D=this.globalState.filters;for(c=0;i>c;c++)f[0][c]=D[0].next(f[0][c]),f[1][c]=D[1].next(f[1][c])}var E=new h(i,f);return this.postMixCallback&&window.setTimeout(function(){b.postMixCallback.call(b.postMixObject,E)},0),E}}]),a}(),a("Mixer",i)}}}),System.register("github:gundy/jssynth@master/lib/jssynth",["github:gundy/jssynth@master/lib/src/mixer","github:gundy/jssynth@master/lib/src/sample","github:gundy/jssynth@master/lib/src/instrument","github:gundy/jssynth@master/lib/src/webaudiodriver"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Mixer},function(a){c=a.Sample},function(a){d=a.Instrument},function(a){e=a.WebAudioDriver}],execute:function(){"use strict";a("Mixer",b),a("Sample",c),a("Instrument",d),a("WebAudioDriver",e)}}}),System.register("github:gundy/jssynth@master",["github:gundy/jssynth@master/lib/jssynth"],function(a){return{setters:[function(b){for(var c in b)a(c,b[c]);a("default",b["default"])}],execute:function(){"use strict"}}}),System.register("lib/src/mod/effects/MOD_ARPEGGIO.js",["github:gundy/jssynth@master","lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/MOD_PERIOD_TABLE.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Utils},function(a){c=a.TEMPLATE_EFFECT},function(a){d=a.MOD_PERIOD_TABLE}],execute:function(){"use strict";e=b.merge(c,{div:function(a,b,c,e,f){var g=d.getNote(f.lastPeriod);if(0!=c)if(0>g||g>108)f.effectState.arpTable=[f.period,f.period,f.period];else{var h=(240&c)/16,i=15&c;f.effectState.arpTable=[d.getPeriod(g),d.getPeriod(g+h),d.getPeriod(g+i)],f.effectState.arpPos=0}},tick:function(a,b,c,d,e){0!=c&&(e.effectState.arpPos=(e.effectState.arpPos+1)%3,e.period=e.effectState.arpTable[e.effectState.arpPos])}}),a("MOD_ARPEGGIO",e)}}}),System.register("lib/src/mod/effects/TEMPLATE_EFFECT.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b={div:function(a,b,c,d){},tick:function(a,b,c,d){},allowSampleTrigger:!0,allowVolumeChange:!0,allowPeriodChange:!0},a("TEMPLATE_EFFECT",b)}}}),System.register("lib/src/mod/effects/MOD_EFFECT_MAP.js",["lib/src/mod/effects/TEMPLATE_EFFECT.js","lib/src/mod/effects/MOD_ARPEGGIO.js","lib/src/mod/effects/MOD_PORTA_UP.js","lib/src/mod/effects/MOD_PORTA_DOWN.js","lib/src/mod/effects/MOD_PORTA_TO_NOTE.js","lib/src/mod/effects/MOD_VIBRATO.js","lib/src/mod/effects/MOD_PORTA_PLUS_VOL_SLIDE.js","lib/src/mod/effects/MOD_VIBRATO_PLUS_VOL_SLIDE.js","lib/src/mod/effects/MOD_TREMOLO.js","lib/src/mod/effects/MOD_PAN.js","lib/src/mod/effects/MOD_SAMPLE_OFFSET.js","lib/src/mod/effects/MOD_VOLUME_SLIDE.js","lib/src/mod/effects/MOD_JUMP_TO_PATTERN.js","lib/src/mod/effects/MOD_SET_VOLUME.js","lib/src/mod/effects/MOD_PATTERN_BREAK.js","lib/src/mod/effects/MOD_PROTRACKER.js","lib/src/mod/effects/MOD_SET_SPEED.js"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){b=a.TEMPLATE_EFFECT},function(a){c=a.MOD_ARPEGGIO},function(a){d=a.MOD_PORTA_UP},function(a){e=a.MOD_PORTA_DOWN},function(a){f=a.MOD_PORTA_TO_NOTE},function(a){g=a.MOD_VIBRATO},function(a){h=a.MOD_PORTA_PLUS_VOL_SLIDE},function(a){i=a.MOD_VIBRATO_PLUS_VOL_SLIDE},function(a){j=a.MOD_TREMOLO},function(a){k=a.MOD_PAN},function(a){l=a.MOD_SAMPLE_OFFSET},function(a){m=a.MOD_VOLUME_SLIDE},function(a){n=a.MOD_JUMP_TO_PATTERN},function(a){o=a.MOD_SET_VOLUME},function(a){p=a.MOD_PATTERN_BREAK},function(a){q=a.MOD_PROTRACKER},function(a){r=a.MOD_SET_SPEED}],execute:function(){"use strict";s={0:{code:"0",effect:c},1:{code:"1",effect:d},2:{code:"2",effect:e},3:{code:"3",effect:f},4:{code:"4",effect:g},5:{code:"5",effect:h},6:{code:"6",effect:i},7:{code:"7",effect:j},8:{code:"8",effect:k},9:{code:"9",effect:l},10:{code:"a",effect:m},11:{code:"b",effect:n},12:{code:"c",effect:o},13:{code:"d",effect:p},14:{code:"e",effect:q},15:{code:"f",effect:r},16:{code:"g",effect:b},17:{code:"h",effect:b},18:{code:"i",effect:b},19:{code:"j",effect:b},20:{code:"k",effect:b},21:{code:"l",effect:b},22:{code:"m",effect:b},23:{code:"n",effect:b},24:{code:"o",effect:b},25:{code:"p",effect:b},26:{code:"q",effect:b},27:{code:"r",effect:b},28:{code:"s",effect:b},29:{code:"t",effect:b},30:{code:"u",effect:b},31:{code:"v",effect:b},32:{code:"w",effect:b},33:{code:"x",effect:b},34:{code:"y",effect:b},35:{code:"z",effect:b}},a("MOD_EFFECT_MAP",s)}}}),System.register("lib/src/mod/MODLoader.js",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check","lib/src/mod/effects/MOD_EFFECT_MAP.js","lib/src/mod/MOD_PERIOD_TABLE.js","lib/src/mod/MOD_FINETUNE_TABLE.js","github:gundy/jssynth@master"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.MOD_EFFECT_MAP},function(a){e=a.MOD_PERIOD_TABLE;
},function(a){f=a.MOD_FINETUNE_TABLE},function(a){g=a.Sample,h=a.Instrument}],execute:function(){"use strict";i={"M.K.":{key:"M.K.",channels:4,instruments:31},"M!K!":{key:"M!K!",channels:4,instruments:31},FLT4:{key:"FLT4",channels:4,instruments:31},"4CHN":{key:"4CHN",channels:4,instruments:31},"6CHN":{key:"6CHN",channels:6,instruments:31},FLT8:{key:"FLT8",channels:8,instruments:31},"8CHN":{key:"8CHN",channels:8,instruments:31},"16CH":{key:"16CH",channels:16,instruments:31}},j=Math.pow(2,1/96),k=function(){function a(){c(this,a)}return b(a,null,[{key:"readMODfile",value:function(a){var b,c=function(b){return 256*a.charCodeAt(b)+a.charCodeAt(b+1)},k=a.substring(1080,1084),l=i[k]||{key:"NOIS",channels:4,instruments:15},m={};m.name=a.substring(0,20),m.type=l.key,m.channels=l.channels,m.effectMap=d;var n=20+30*l.instruments;m.songLength=a.charCodeAt(n),m.orders=[];var o=0;for(b=0;128>b;b++)m.orders[b]=a.charCodeAt(n+2+b),m.orders[b]>o&&(o=m.orders[b]);var p=n+130;for(l.instruments>15&&(p+=4),m.patterns=[],b=0;o>=b;b++){var q,r=[],s=p+256*l.channels*b;for(q=0;64>q;q++){var t,u=[];for(t=0;t<l.channels;t++){var v={},w=s+4*q*l.channels+4*t,x=a.charCodeAt(w),y=a.charCodeAt(w+1),z=a.charCodeAt(w+2),A=a.charCodeAt(w+3);v.sampleNumber=(240&x)+(240&z)/16;var B=4*(256*(15&x)+y);v.note=0===B?-1:e.getNote(B),v.effect=15&z,v.parameter=A,v.volume=-1,u.push(v)}r.push(u)}m.patterns.push(r)}var C=p+256*l.channels*(o+1),D=[];return function(){var d,e,i,k,m,n,o;for(b=0;b<l.instruments;b++)d=20+30*b,e=2*c(d+22),i=2*c(d+28),k=a.substring(d,d+22),n=2*c(d+26),o=2*c(d+26)+i,i>2&&o>e&&(o=e-1,i=o-n),m=new g(a,{name:k,bits:8,channels:1,signed:!0,sampleRate:44100,representedFreq:44100/Math.pow(j,f[a.charCodeAt(d+24)]),sampleLength:e,volume:a.charCodeAt(d+25),repeatType:i>2?"REP_NORMAL":"NON_REPEATING",repeatStart:n,repeatEnd:o},C),C+=e,D[b]=new h({name:k,numSamples:1},[m])}(),m.instruments=D,m}}]),a}(),a("MODLoader",k)}}}),System.register("lib/src/mod/MOD_PERIOD_TABLE.js",[],function(a){var b;return{setters:[],execute:function(){"use strict";b={PERIODS:[27392,25856,24384,23040,21696,20480,19328,18240,17216,16256,15360,14496,13696,12928,12192,11520,10848,10240,9664,9120,8608,8128,7680,7248,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3624,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1812,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,906,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,107,101,95,90,85,80,75,71,67,63,60,56],NOTE_NAMES:["C-0","C#0","D-0","D#0","E-0","F-0","F#0","G-0","G#0","A-0","A#0","B-0","C-1","C#1","D-1","D#1","E-1","F-1","F#1","G-1","G#1","A-1","A#1","B-1","C-2","C#2","D-2","D#2","E-2","F-2","F#2","G-2","G#2","A-2","A#2","B-2","C-3","C#3","D-3","D#3","E-3","F-3","F#3","G-3","G#3","A-3","A#3","B-3","C-4","C#4","D-4","D#4","E-4","F-4","F#4","G-4","G#4","A-4","A#4","B-4","C-5","C#5","D-5","D#5","E-5","F-5","F#5","G-5","G#5","A-5","A#5","B-5","C-6","C#6","D-6","D#6","E-6","F-6","F#6","G-6","G#6","A-6","A#6","B-6","C-7","C#7","D-7","D#7","E-7","F-7","F#7","G-7","G#7","A-7","A#7","B-7","C-8","C#8","D-8","D#8","E-8","F-8","F#8","G-8","G#8","A-8","A#8","B-8"],getNote:function(a){var c=0;if(0>=a)return-1;for(c=0;c<b.PERIODS.length-1;c++){var d=b.PERIODS[c],e=b.PERIODS[c+1];if(Math.abs(d-a)<Math.abs(e-a))return c}return-1},getPeriod:function(a){return b.PERIODS[a]||-1},getName:function(a){return 254==a?"oFF":b.NOTE_NAMES[a]||"---"}},a("MOD_PERIOD_TABLE",b)}}}),System.register("lib/src/AMIGA_FILTERS.js",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check"],function(a){var b,c,d,e;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){"use strict";d=function(){function a(){c(this,a),this.GAIN=24.33619312,this.xv=[0,0,0],this.yv=[0,0,0]}return b(a,[{key:"next",value:function(a){return this.xv[0]=this.xv[1],this.xv[1]=this.xv[2],this.xv[2]=a/this.GAIN,this.yv[0]=this.yv[1],this.yv[1]=this.yv[2],this.yv[2]=this.xv[0]+this.xv[2]+2*this.xv[1]+-.5147540757*this.yv[0]+1.350389831*this.yv[1],this.yv[2]}}]),a}(),e=[new d,new d],a("AMIGA_FILTERS",e)}}}),System.registerDynamic("npm:babel-runtime@5.2.17/helpers/class-call-check",[],!0,function(a,b,c){"use strict";var d=this,e=d.define;return d.define=void 0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.__esModule=!0,d.define=e,c.exports}),System.registerDynamic("npm:core-js@0.9.7/library/modules/$.fw",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){return a.FW=!1,a.path=a.core,a},d.define=e,c.exports}),System.registerDynamic("npm:core-js@0.9.7/library/modules/$",["npm:core-js@0.9.7/library/modules/$.fw"],!0,function(a,b,c){"use strict";function d(a){return isNaN(a=+a)?0:(a>0?q:p)(a)}function e(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function f(a,b,c){return a[b]=c,a}function g(a){return t?function(b,c,d){return v.setDesc(b,c,e(a,d))}:f}function h(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function i(a){return"function"==typeof a}function j(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}var k=this,l=k.define;k.define=void 0;var k="undefined"!=typeof self?self:Function("return this")(),m={},n=Object.defineProperty,o={}.hasOwnProperty,p=Math.ceil,q=Math.floor,r=Math.max,s=Math.min,t=!!function(){try{return 2==n({},"a",{get:function(){return 2}}).a}catch(a){}}(),u=g(1),v=c.exports=a("npm:core-js@0.9.7/library/modules/$.fw")({g:k,core:m,html:k.document&&document.documentElement,isObject:h,isFunction:i,it:function(a){return a},that:function(){return this},toInteger:d,toLength:function(a){return a>0?s(d(a),9007199254740991):0},toIndex:function(a,b){return a=d(a),0>a?r(a+b,0):s(a,b)},has:function(a,b){return o.call(a,b)},create:Object.create,getProto:Object.getPrototypeOf,DESC:t,desc:e,getDesc:Object.getOwnPropertyDescriptor,setDesc:n,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:j,ES5Object:Object,toObject:function(a){return v.ES5Object(j(a))},hide:u,def:g(0),set:k.Symbol?f:u,mix:function(a,b){for(var c in b)u(a,c,b[c]);return a},each:[].forEach});return"undefined"!=typeof __e&&(__e=m),"undefined"!=typeof __g&&(__g=k),k.define=l,c.exports}),System.registerDynamic("npm:core-js@0.9.7/library/fn/object/define-property",["npm:core-js@0.9.7/library/modules/$"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("npm:core-js@0.9.7/library/modules/$");return c.exports=function(a,b,c){return f.setDesc(a,b,c)},d.define=e,c.exports}),System.registerDynamic("npm:babel-runtime@5.2.17/core-js/object/define-property",["npm:core-js@0.9.7/library/fn/object/define-property"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports={"default":a("npm:core-js@0.9.7/library/fn/object/define-property"),__esModule:!0},d.define=e,c.exports}),System.registerDynamic("npm:babel-runtime@5.2.17/helpers/create-class",["npm:babel-runtime@5.2.17/core-js/object/define-property"],!0,function(a,b,c){"use strict";var d=this,e=d.define;d.define=void 0;var f=a("npm:babel-runtime@5.2.17/core-js/object/define-property")["default"];return b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.__esModule=!0,d.define=e,c.exports}),System.register("lib/src/Player.js",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check","lib/src/AMIGA_FILTERS.js","lib/src/mod/MOD_PERIOD_TABLE.js"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.AMIGA_FILTERS},function(a){e=a.MOD_PERIOD_TABLE}],execute:function(){"use strict";f={clock:28636362},g={clock:28375156.8},h=function(){function a(b){c(this,a),this.playing=!0,this.loggingEnabled=!1,this.song=null,this.stateCallback=null,this.mixer=b,this.mixer.setPreMixCallback(this.preSampleMix,this),this.FREQ={PAL:g,NTSC:f}}return b(a,[{key:"setSong",value:function(a){this.song=a,this.effectMap=a.effectMap,this.playerState={freq:a.defaultFreq||g,pos:0,row:-1,tick:6,speed:a.initialSpeed||6,bpm:a.initialBPM||125,globalVolume:a.globalVolume||64,patternDelay:0,glissandoControl:0,breakToRow:null,jumpToPattern:null,l_breakToRow:null,l_jumpToPattern:null,fastS3MVolumeSlides:a.fastS3MVolumeSlides||!1,filter:0};var b=a.defaultPanPos||[-.8,.8,.8,-.8,-.8,.8,.8,-.8,-.8,.8,.8,-.8,-.8,.8,.8,-.8];this.channelState=[];for(var c=0;c<a.channels;c++)this.channelState[c]={chan:c,panPos:b[c],volume:64,lastVolume:void 0,period:0,pitchOfs:1,lastPeriod:0,effect:0,effectParameter:0,effectState:{tremorCount:0,tremorParam:0,arpPos:0,noteDelay:-1,vibratoParams:{waveform:0,pos:0,depth:0,speed:0},tremoloParams:{waveform:0,pos:0,depth:0,speed:0},patternLoop:{row:0,count:null},invertLoop:{pos:0,delay:0,sample:null}}},this.mixer.setPanPosition(c,this.channelState[c].panPos)}},{key:"start",value:function(){this.playing=!0}},{key:"stop",value:function(){this.playing=!1;for(var a=0;a<this.song.channels;a++)this.mixer.cut(a)}},{key:"preSampleMix",value:function(a,b){if(this.playing){var c=this.playerState,e=this.song;c.patternDelay>0?(c.patternDelay--,this.handleTick(e.patterns[e.orders[c.pos]][c.row],c.tick,b)):(0==c.tick?(this.stateCallback&&this.stateCallback(this.playerState,this.channelState),this.handleDiv(e.patterns[e.orders[c.pos]][c.row],b)):this.handleTick(e.patterns[e.orders[c.pos]][c.row],c.tick,b),this.advanceTick()),0===c.tick&&(null!==c.l_jumpToPattern&&(c.jumpToPattern=c.l_jumpToPattern,c.breakToRow=c.l_breakToRow,c.l_jumpToPattern=null,c.l_breakToRow=null),null!==c.jumpToPattern&&(c.pos=c.jumpToPattern,c.jumpToPattern=null,null!==c.breakToRow?(c.row=c.breakToRow,c.breakToRow=null):c.row=0),null!==c.breakToRow&&(0!==c.row&&this.advancePos(),c.row=c.breakToRow,c.breakToRow=null)),this.playerState.filter>0?this.mixer.setFilters(d):this.mixer.setFilters(null),this.mixer.setGlobalVolume(c.globalVolume),this.mixer.setSecondsPerMix(1/(2*c.bpm/5))}}},{key:"nextPos",value:function(){this.advancePos(),this.playerState.row=0,this.playerState.tick=0}},{key:"previousPos",value:function(){this.decrementPos(),this.playerState.row=0,this.playerState.tick=0}},{key:"advancePos",value:function(){var a=this.playerState,b=this.song;do a.pos=a.pos+1;while(254==b.orders[a.pos]);(a.pos>=b.songLength||255==b.orders[a.pos])&&(a.pos=0)}},{key:"decrementPos",value:function(){var a=this.playerState,b=this.song;do a.pos-=1;while(254==b.orders[a.pos]);if(a.pos<0){a.pos=b.songLength;do a.pos-=1;while(254==b.orders[a.pos])}}},{key:"advanceRow",value:function(){var a=this.playerState,b=this.song,c=b.patterns[b.orders[a.pos]].length;if(a.row=a.row+1,a.row>=c){var d;for(d=0;d<b.channels;d++)this.channelState[d].effectState.patternLoop.row=0;a.row=0,this.advancePos()}}},{key:"advanceTick",value:function(){var a=this.playerState;a.tick+=1,a.tick>=a.speed&&(a.tick=0,this.advanceRow())}},{key:"handleTick",value:function(a,b,c){for(var d=0;d<this.song.channels;d++){var f=this.channelState[d],g=f.effectParameter,h=f.effect,i=null,j=null;a&&a[d]&&a[d].volumeEffect&&(i=this.effectMap[a[d].volumeEffect].effect,j=a[d].volumeEffectParameter),i&&i.tick(this.mixer,d,j,this.playerState,f,null,null,this.song),h&&h.tick(this.mixer,d,g,this.playerState,f,null,null,this.song);var k=f.period;if(this.playerState.glissandoControl>0){var l=e.getNote(k);k=e.getPeriod(l)}var m=this.playerState.freq.clock/(2*k)*f.pitchOfs;this.mixer.setFrequency(d,m),this.mixer.setVolume(d,f.volume)}}},{key:"handleNote",value:function(a,b,c){var d=this.channelState[a],f=0;b.note>0&&254!==b.note&&(f=e.getPeriod(b.note));var g=b.sampleNumber-1;d.effectParameter=b.parameter;var h=this.effectMap[b.effect].effect,i=null,j=null;if(b.volumeEffect&&(i=this.effectMap[b.volumeEffect].effect,j=b.volumeEffectParameter),!h&&this.loggingEnabled&&console&&console.log&&console.log("no effect handler for effect "+b.effect.toString(16)+"/"+b.parameter.toString(16)),d.effect=h,g>=0&&this.song.instruments[g]){var k=this.song.instruments[g],l=b.note;if(0>l&&(l=e.getNote(d.period)),l>0){var m=k.metadata.noteToSampleMap[l],n=k.samples[m];this.mixer.setSample(a,n),d.pitchOfs=n.metadata.pitchOfs||1,(h&&h.allowVolumeChange===!0||!h)&&(d.volume=n.metadata.volume,d.lastVolume=n.metadata.volume)}}f>0&&(h&&h.allowPeriodChange===!0||!h)&&(d.period=f,d.lastPeriod=f,(h&&h.allowSampleTrigger===!0||!h)&&this.mixer.setSamplePosition(a,0));var o=b.volume;o>=0&&(h&&h.allowVolumeChange===!0||!h)&&(d.volume=o,d.lastVolume=o),254===b.note&&this.mixer.cut(a),i&&i.div(this.mixer,a,j,this.playerState,d,f,b,this.song),h&&h.div(this.mixer,a,d.effectParameter,this.playerState,d,f,b,this.song);var p=d.period;if(this.playerState.glissandoControl>0){var q=e.getNote(p);p=e.getPeriod(q)}this.mixer.setVolume(a,d.volume);var r=this.playerState.freq.clock/(2*p)*d.pitchOfs;this.mixer.setFrequency(a,r)}},{key:"getPlayerState",value:function(){return this.playerState}},{key:"handleDiv",value:function(a,b){for(var c=0;c<this.song.channels;c++){var d=a[c];this.handleNote(c,d,b)}}},{key:"registerCallback",value:function(a){this.stateCallback=a}}]),a}(),a("Player",h)}}}),System.register("lib/jssynth-mod.js",["lib/src/Player.js","lib/src/mod/MODLoader.js","github:gundy/jssynth@master"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.Player},function(a){c=a.MODLoader},function(a){d=a.Sample,e=a.Instrument,f=a.Mixer,g=a.WebAudioDriver}],execute:function(){"use strict";a("Mixer",f),a("Player",b),a("MODLoader",c),a("Sample",d),a("Instrument",e),a("WebAudioDriver",g)}}});
//# sourceMappingURL=jssynth-mod.min.js.map